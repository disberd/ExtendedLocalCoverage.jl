<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ExtendedLocalCoverage coverage report</title><style>* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  color: #333;
  background: #f5f7fa;
  padding: 20px;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
}

header h1 {
  font-size: 28px;
  margin-bottom: 8px;
}

header .subtitle {
  opacity: 0.9;
  font-size: 14px;
}

.summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  padding: 30px;
  background: #fafbfc;
  border-bottom: 1px solid #e1e4e8;
}

.metric {
  background: white;
  padding: 20px;
  border-radius: 6px;
  border-left: 4px solid #667eea;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.metric-label {
  font-size: 12px;
  text-transform: uppercase;
  color: #666;
  font-weight: 600;
  margin-bottom: 8px;
  letter-spacing: 0.5px;
}

.metric-value {
  font-size: 32px;
  font-weight: bold;
  color: #333;
}

.metric-subtext {
  font-size: 13px;
  color: #666;
  margin-top: 4px;
}

.files-section {
  padding: 30px;
}

.files-section h2 {
  font-size: 20px;
  margin-bottom: 20px;
  color: #333;
}

.summary-table-section {
  padding: 30px;
  border-bottom: 1px solid #e1e4e8;
}

.summary-table-section h2 {
  font-size: 20px;
  margin-bottom: 20px;
  color: #333;
}

.file-summary-table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 6px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.file-summary-table thead {
  background: #fafbfc;
  border-bottom: 2px solid #e1e4e8;
}

.file-summary-table th {
  padding: 12px 16px;
  text-align: left;
  font-size: 12px;
  font-weight: 600;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.file-summary-table th:last-child {
  text-align: right;
}

.file-summary-table td {
  padding: 12px 16px;
  border-bottom: 1px solid #e1e4e8;
  font-size: 14px;
}

.file-summary-table tbody tr:hover {
  background: #f6f8fa;
}

.file-summary-table tbody tr:last-child td {
  border-bottom: none;
}

.file-summary-table .file-link {
  color: #0366d6;
  text-decoration: none;
  font-family: "Consolas", "Monaco", monospace;
  font-size: 13px;
}

.file-summary-table .file-link:hover {
  text-decoration: underline;
}

.file-summary-table .stats-cell {
  text-align: center;
  font-family: "Consolas", "Monaco", monospace;
}

.file-summary-table .missing-cell {
  font-family: "Consolas", "Monaco", monospace;
  font-size: 12px;
  color: #d73a49;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.file-card {
  background: white;
  border: 1px solid #e1e4e8;
  border-radius: 6px;
  margin-bottom: 20px;
  overflow: hidden;
  transition: box-shadow 0.2s;
}

.file-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.file-header {
  padding: 16px 20px;
  background: #fafbfc;
  border-bottom: 1px solid #e1e4e8;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
}

.file-name {
  font-family: "Consolas", "Monaco", monospace;
  font-size: 14px;
  font-weight: 600;
  color: #333;
}

.file-stats {
  display: flex;
  gap: 20px;
  font-size: 13px;
}

.stat {
  display: flex;
  align-items: center;
  gap: 6px;
}

.coverage-badge {
  padding: 4px 12px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 12px;
}

.coverage-excellent {
  background: #d4edda;
  color: #155724;
}

.coverage-good {
  background: #fff3cd;
  color: #856404;
}

.coverage-poor {
  background: #f8d7da;
  color: #721c24;
}

.source-code {
  max-height: 600px;
  overflow-y: auto;
  background: #f6f8fa;
}

.code-line {
  display: flex;
  font-family: "Consolas", "Monaco", monospace;
  font-size: 13px;
  line-height: 1.5;
  border-bottom: 1px solid #e1e4e8;
}

.code-line:last-child {
  border-bottom: none;
}

.line-number {
  min-width: 60px;
  padding: 4px 12px;
  text-align: right;
  color: #666;
  background: #fafbfc;
  border-right: 1px solid #e1e4e8;
  user-select: none;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.line-content {
  flex: 1;
  padding: 4px 12px;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.line-covered {
  background: #e6ffec;
  border-left: 3px solid #28a745;
}

.line-uncovered {
  background: #ffe6e6;
  border-left: 3px solid #dc3545;
}

.line-neutral {
  background: white;
  border-left: 3px solid transparent;
}

.missing-lines {
  padding: 12px 20px;
  background: #fff5f5;
  border-top: 1px solid #e1e4e8;
  font-family: "Consolas", "Monaco", monospace;
  font-size: 12px;
  color: #d73a49;
}

.missing-lines strong {
  color: #721c24;
}

footer {
  padding: 20px 30px;
  background: #fafbfc;
  border-top: 1px solid #e1e4e8;
  text-align: center;
  color: #666;
  font-size: 13px;
}

@media (max-width: 768px) {
  .summary {
    grid-template-columns: 1fr;
  }

  .file-header {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style></head><body><div class="container"><header><h1>ExtendedLocalCoverage coverage report</h1></header><div class="summary"><div class="metric"><div class="metric-label">Total Coverage</div><div class="metric-value">98.57%</div><div class="metric-subtext">207 of 210 lines</div></div><div class="metric"><div class="metric-label">Lines Covered</div><div class="metric-value">207</div><div class="metric-subtext"></div></div><div class="metric"><div class="metric-label">Lines Uncovered</div><div class="metric-value">3</div><div class="metric-subtext"></div></div><div class="metric"><div class="metric-label">Tracked Files</div><div class="metric-value">5</div><div class="metric-subtext"></div></div></div><div class="summary-table-section"><h2>üìã Files Overview</h2><table class="file-summary-table"><thead><tr><th>File</th><th class="stats-cell">Total Lines</th><th class="stats-cell">Covered</th><th class="stats-cell">Missed</th><th class="stats-cell">Coverage</th><th>Missing Lines</th></tr></thead><tbody><tr><td><a class="file-link" href="#file-1">src/ExtendedLocalCoverage.jl</a></td><td class="stats-cell">55</td><td class="stats-cell">55</td><td class="stats-cell">0</td><td class="stats-cell"><span class="coverage-badge coverage-excellent">100.0%</span></td><td class="missing-cell">‚Äî</td></tr><tr><td><a class="file-link" href="#file-2">src/show_fix.jl</a></td><td class="stats-cell">32</td><td class="stats-cell">31</td><td class="stats-cell">1</td><td class="stats-cell"><span class="coverage-badge coverage-excellent">96.88%</span></td><td class="missing-cell">43</td></tr><tr><td><a class="file-link" href="#file-3">src/html_report.jl</a></td><td class="stats-cell">112</td><td class="stats-cell">110</td><td class="stats-cell">2</td><td class="stats-cell"><span class="coverage-badge coverage-excellent">98.21%</span></td><td class="missing-cell">303‚Äì304</td></tr><tr><td><a class="file-link" href="#file-4">ext/JuliaSyntaxHighlightingExt.jl</a></td><td class="stats-cell">5</td><td class="stats-cell">5</td><td class="stats-cell">0</td><td class="stats-cell"><span class="coverage-badge coverage-excellent">100.0%</span></td><td class="missing-cell">‚Äî</td></tr><tr><td><a class="file-link" href="#file-5">ext/StyledStringsExt.jl</a></td><td class="stats-cell">6</td><td class="stats-cell">6</td><td class="stats-cell">0</td><td class="stats-cell"><span class="coverage-badge coverage-excellent">100.0%</span></td><td class="missing-cell">‚Äî</td></tr></tbody></table></div><div class="files-section"><h2>üìÅ File Coverage Details</h2><div class="file-card" id="file-1"><div class="file-header"><div class="file-name">src/ExtendedLocalCoverage.jl</div><div class="file-stats"><span class="stat"><span class="coverage-badge coverage-excellent">100.0%</span></span><span class="stat"><span>üìä 55/55 lines</span></span><span class="stat"><span>‚ùå 0 missed</span></span></div></div><div class="source-code"><div class="code-line line-neutral"><div class="line-number">1</div><div class="line-content"><span style="color: #a51c2c">module</span> ExtendedLocalCoverage</div></div><div class="code-line line-neutral"><div class="line-number">2</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">3</div><div class="line-content"><span style="color: #a51c2c">using</span> LocalCoverage:</div></div><div class="code-line line-neutral"><div class="line-number">4</div><div class="line-content">    LocalCoverage,</div></div><div class="code-line line-neutral"><div class="line-number">5</div><div class="line-content">    write_lcov_to_xml,</div></div><div class="code-line line-neutral"><div class="line-number">6</div><div class="line-content">    pkgdir,</div></div><div class="code-line line-neutral"><div class="line-number">7</div><div class="line-content">    eval_coverage_metrics,</div></div><div class="code-line line-neutral"><div class="line-number">8</div><div class="line-content">    PackageCoverage,</div></div><div class="code-line line-neutral"><div class="line-number">9</div><div class="line-content">    FileCoverageSummary,</div></div><div class="code-line line-neutral"><div class="line-number">10</div><div class="line-content">    format_gaps</div></div><div class="code-line line-neutral"><div class="line-number">11</div><div class="line-content"><span style="color: #a51c2c">using</span> HypertextTemplates: HypertextTemplates, @component, @deftag, @render, @text, SafeString</div></div><div class="code-line line-neutral"><div class="line-number">12</div><div class="line-content"><span style="color: #a51c2c">using</span> HypertextTemplates.Elements:</div></div><div class="code-line line-neutral"><div class="line-number">13</div><div class="line-content">    Elements,</div></div><div class="code-line line-neutral"><div class="line-number">14</div><div class="line-content">    @a,</div></div><div class="code-line line-neutral"><div class="line-number">15</div><div class="line-content">    @body,</div></div><div class="code-line line-neutral"><div class="line-number">16</div><div class="line-content">    @div,</div></div><div class="code-line line-neutral"><div class="line-number">17</div><div class="line-content">    @footer,</div></div><div class="code-line line-neutral"><div class="line-number">18</div><div class="line-content">    @h1,</div></div><div class="code-line line-neutral"><div class="line-number">19</div><div class="line-content">    @h2,</div></div><div class="code-line line-neutral"><div class="line-number">20</div><div class="line-content">    @head,</div></div><div class="code-line line-neutral"><div class="line-number">21</div><div class="line-content">    @header,</div></div><div class="code-line line-neutral"><div class="line-number">22</div><div class="line-content">    @html,</div></div><div class="code-line line-neutral"><div class="line-number">23</div><div class="line-content">    @meta,</div></div><div class="code-line line-neutral"><div class="line-number">24</div><div class="line-content">    @span,</div></div><div class="code-line line-neutral"><div class="line-number">25</div><div class="line-content">    @strong,</div></div><div class="code-line line-neutral"><div class="line-number">26</div><div class="line-content">    @style,</div></div><div class="code-line line-neutral"><div class="line-number">27</div><div class="line-content">    @table,</div></div><div class="code-line line-neutral"><div class="line-number">28</div><div class="line-content">    @tbody,</div></div><div class="code-line line-neutral"><div class="line-number">29</div><div class="line-content">    @td,</div></div><div class="code-line line-neutral"><div class="line-number">30</div><div class="line-content">    @th,</div></div><div class="code-line line-neutral"><div class="line-number">31</div><div class="line-content">    @thead,</div></div><div class="code-line line-neutral"><div class="line-number">32</div><div class="line-content">    @title,</div></div><div class="code-line line-neutral"><div class="line-number">33</div><div class="line-content">    @tr</div></div><div class="code-line line-neutral"><div class="line-number">34</div><div class="line-content"><span style="color: #a51c2c">using</span> Revise: Revise, parse_pkg_files</div></div><div class="code-line line-neutral"><div class="line-number">35</div><div class="line-content"><span style="color: #a51c2c">using</span> TOML: TOML, tryparsefile</div></div><div class="code-line line-neutral"><div class="line-number">36</div><div class="line-content"><span style="color: #a51c2c">using</span> CoverageTools: CoverageTools, LCOV</div></div><div class="code-line line-neutral"><div class="line-number">37</div><div class="line-content"><span style="color: #a51c2c">import</span> Pkg</div></div><div class="code-line line-neutral"><div class="line-number">38</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">39</div><div class="line-content"><span style="color: #a51c2c">export</span> generate_package_coverage, generate_html_report</div></div><div class="code-line line-neutral"><div class="line-number">40</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">41</div><div class="line-content"><span style="color: #a51c2c">const</span> StyledStringsLoaded = Ref(false)</div></div><div class="code-line line-neutral"><div class="line-number">42</div><div class="line-content"><span style="color: #a51c2c">const</span> JuliaSyntaxHighlightingLoaded = Ref(false)</div></div><div class="code-line line-neutral"><div class="line-number">43</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">44</div><div class="line-content"><span style="color: #76757a"># This is a temporary fix to fix PrettyTables issues until https://github.com/JuliaCI/LocalCoverage.jl/pull/68 is merged.</span></div></div><div class="code-line line-neutral"><div class="line-number">45</div><div class="line-content">include(<span style="color: #25a268">"</span><span style="color: #25a268">show_fix.jl</span><span style="color: #25a268">"</span>)</div></div><div class="code-line line-neutral"><div class="line-number">46</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">47</div><div class="line-content"><span style="color: #76757a"># Native Julia HTML report generation (without Python dependencies)</span></div></div><div class="code-line line-neutral"><div class="line-number">48</div><div class="line-content">include(<span style="color: #25a268">"</span><span style="color: #25a268">html_report.jl</span><span style="color: #25a268">"</span>)</div></div><div class="code-line line-neutral"><div class="line-number">49</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">50</div><div class="line-content"><span style="color: #a51c2c">function</span> extract_package_info(pkg_dir)</div></div><div class="code-line line-covered"><div class="line-number">51</div><div class="line-content">    project_toml = TOML.tryparsefile(joinpath(pkg_dir, <span style="color: #25a268">"</span><span style="color: #25a268">Project.toml</span><span style="color: #25a268">"</span>))</div></div><div class="code-line line-covered"><div class="line-number">52</div><div class="line-content">    pkg_name = project_toml[<span style="color: #25a268">"</span><span style="color: #25a268">name</span><span style="color: #25a268">"</span>]</div></div><div class="code-line line-covered"><div class="line-number">53</div><div class="line-content">    pkg_uuid = project_toml[<span style="color: #25a268">"</span><span style="color: #25a268">uuid</span><span style="color: #25a268">"</span>] |&gt; Base.UUID</div></div><div class="code-line line-covered"><div class="line-number">54</div><div class="line-content">    pkg_extensions = get(Dict{String,Any}, project_toml, <span style="color: #25a268">"</span><span style="color: #25a268">extensions</span><span style="color: #25a268">"</span>) |&gt; keys</div></div><div class="code-line line-covered"><div class="line-number">55</div><div class="line-content">    pkg_id = Base.PkgId(pkg_uuid, pkg_name)</div></div><div class="code-line line-covered"><div class="line-number">56</div><div class="line-content">    <span style="color: #a51c2c">return</span> (; pkg_name, pkg_uuid, pkg_id, pkg_extensions)</div></div><div class="code-line line-neutral"><div class="line-number">57</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">58</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">59</div><div class="line-content"><span style="color: #a51c2c">function</span> extract_included_files(pkg_id::Base.PkgId)</div></div><div class="code-line line-neutral"><div class="line-number">60</div><div class="line-content">    <span style="color: #76757a"># We always import the package in Main to make sure the Revise can find the source files</span></div></div><div class="code-line line-covered"><div class="line-number">61</div><div class="line-content">    Base.eval(Main, :(<span style="color: #a51c2c">import</span> $(Symbol(pkg_id.name))))</div></div><div class="code-line line-covered"><div class="line-number">62</div><div class="line-content">    pkgfiles = parse_pkg_files(pkg_id)</div></div><div class="code-line line-covered"><div class="line-number">63</div><div class="line-content">    <span style="color: #a51c2c">return</span> unique(pkgfiles.info.files)</div></div><div class="code-line line-neutral"><div class="line-number">64</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">65</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">66</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">67</div><div class="line-content"><span style="color: #25a268">    generate_package_coverage(pkg = nothing; kwargs...)</span></div></div><div class="code-line line-neutral"><div class="line-number">68</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">69</div><div class="line-content"><span style="color: #25a268">Generate a summary of coverage results for package `pkg`.</span></div></div><div class="code-line line-neutral"><div class="line-number">70</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">71</div><div class="line-content"><span style="color: #25a268">If no `pkg` is supplied, the method operates in the currently active package.</span></div></div><div class="code-line line-neutral"><div class="line-number">72</div><div class="line-content"><span style="color: #25a268">This acts similary to (and based on) the `generate_coverage` function from [LocalCoverage.jl](https://github.com/JuliaCI/LocalCoverage.jl), but providing two main differences:</span></div></div><div class="code-line line-neutral"><div class="line-number">73</div><div class="line-content"><span style="color: #25a268">- It automatically extracts the list of files included by the package using `Revise.parse_pkg_files`.</span></div></div><div class="code-line line-neutral"><div class="line-number">74</div><div class="line-content"><span style="color: #25a268">- It allows to generate an HTML report (does so by default) using the `pycobertura` Python package which is installed by default via CondaPkg.</span></div></div><div class="code-line line-neutral"><div class="line-number">75</div><div class="line-content"><span style="color: #25a268">  - In contrast, the HTML report from `LocalCoverage.jl` relies on lcov being already available on your system and does not work on Windows machines.</span></div></div><div class="code-line line-neutral"><div class="line-number">76</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">77</div><div class="line-content"><span style="color: #25a268"># Keyword arguments (and their defaults)</span></div></div><div class="code-line line-neutral"><div class="line-number">78</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">79</div><div class="line-content"><span style="color: #25a268"> - `use_existing_lcov = false` if true, the coverage is assumed to be already computed and available in `coverage/lcov.info` within the package directory. If false, the coverage is generated from scratch calling `LocalCoverage.generate_coverage`.</span></div></div><div class="code-line line-neutral"><div class="line-number">80</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">81</div><div class="line-content"><span style="color: #25a268">- `run_test = true` this is forwarded to `LocalCoverage.generate_coverage` and determines whether tests are executed. When `false`, test execution step is skipped allowing an easier use in combination with other test packages.</span></div></div><div class="code-line line-neutral"><div class="line-number">82</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">83</div><div class="line-content"><span style="color: #25a268">- `test_args = [""]` this is forwarded to `LocalCoverage.generate_coverage` and is there passed on to `Pkg.test`.</span></div></div><div class="code-line line-neutral"><div class="line-number">84</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">85</div><div class="line-content"><span style="color: #25a268">- `exclude = []` is used to specify string or regexes that are used to filter out some of the files in the list of package includes. The exclusion is done by removing from the list of files all files for which `occursin(needle, filename)` returns `true`, where `needle` is any element of `exclude`.</span></div></div><div class="code-line line-neutral"><div class="line-number">86</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">87</div><div class="line-content"><span style="color: #25a268">- `html_name = "index.html"` is the name of the HTML file to be generated. If nothing is provided, no HTML report is generated. The report is always generated in the `coverage` subdirectory of the target package directory.</span></div></div><div class="code-line line-neutral"><div class="line-number">88</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">89</div><div class="line-content"><span style="color: #25a268">- `cobertura_name = "cobertura-coverage.xml"` is the name of the cobertura XML file to be generated. If nothing is provided both to this kwarg and to `html_name`, no cobertura XML file is generated. The file is always generated in the `coverage` subdirectory of the target package directory.</span></div></div><div class="code-line line-neutral"><div class="line-number">90</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">91</div><div class="line-content"><span style="color: #25a268">- `print_to_stdout = true` determines whether the coverage summary is printed to the standard output.</span></div></div><div class="code-line line-neutral"><div class="line-number">92</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">93</div><div class="line-content"><span style="color: #25a268">- `extensions = true` when `true`, also tries to add to the coverage files in the `ext` directory that match an extension name specified in the `Project.toml` file.</span></div></div><div class="code-line line-neutral"><div class="line-number">94</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">95</div><div class="line-content"><span style="color: #25a268">- `lines_function` use to customize how the HTML report is generated. Is directly forwarded to `generate_html_report` and can only be provided if the `html_name` kwarg is also provided.</span></div></div><div class="code-line line-neutral"><div class="line-number">96</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">97</div><div class="line-content"><span style="color: #25a268">- `html_function` use to customize how the HTML report is generated. Is directly forwarded to `generate_html_report` and can only be provided if the `html_name` kwarg is also provided.</span></div></div><div class="code-line line-neutral"><div class="line-number">98</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">99</div><div class="line-content"><span style="color: #25a268"># Return values</span></div></div><div class="code-line line-neutral"><div class="line-number">100</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">101</div><div class="line-content"><span style="color: #25a268">The function returns a named tuple with the following fields:</span></div></div><div class="code-line line-neutral"><div class="line-number">102</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">103</div><div class="line-content"><span style="color: #25a268">- `cov` the coverage summary as returned by `LocalCoverage.generate_coverage`.</span></div></div><div class="code-line line-neutral"><div class="line-number">104</div><div class="line-content"><span style="color: #25a268">- `cobertura_file` the full path to the cobertura XML file, if any was generated.</span></div></div><div class="code-line line-neutral"><div class="line-number">105</div><div class="line-content"><span style="color: #25a268">- `html_file` the full path to the HTML file, if any was generated.</span></div></div><div class="code-line line-neutral"><div class="line-number">106</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-covered"><div class="line-number">107</div><div class="line-content"><span style="color: #a51c2c">function</span> generate_package_coverage(</div></div><div class="code-line line-neutral"><div class="line-number">108</div><div class="line-content">    pkg = nothing;</div></div><div class="code-line line-neutral"><div class="line-number">109</div><div class="line-content">    use_existing_lcov = false,</div></div><div class="code-line line-neutral"><div class="line-number">110</div><div class="line-content">    run_test = true,</div></div><div class="code-line line-neutral"><div class="line-number">111</div><div class="line-content">    test_args = [<span style="color: #25a268">"<span style="">"</span></span>],</div></div><div class="code-line line-neutral"><div class="line-number">112</div><div class="line-content">    exclude = [],</div></div><div class="code-line line-neutral"><div class="line-number">113</div><div class="line-content">    html_name = <span style="color: #25a268">"</span><span style="color: #25a268">index.html</span><span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">114</div><div class="line-content">    cobertura_name = <span style="color: #25a268">"</span><span style="color: #25a268">cobertura-coverage.xml</span><span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">115</div><div class="line-content">    print_to_stdout = true,</div></div><div class="code-line line-neutral"><div class="line-number">116</div><div class="line-content">    extensions = true,</div></div><div class="code-line line-neutral"><div class="line-number">117</div><div class="line-content">    lines_function = nothing,</div></div><div class="code-line line-neutral"><div class="line-number">118</div><div class="line-content">    html_function = nothing,</div></div><div class="code-line line-neutral"><div class="line-number">119</div><div class="line-content">)</div></div><div class="code-line line-covered"><div class="line-number">120</div><div class="line-content">    pkg_dir = pkgdir(pkg)</div></div><div class="code-line line-covered"><div class="line-number">121</div><div class="line-content">    (; pkg_name, pkg_id, pkg_extensions) = extract_package_info(pkg_dir)</div></div><div class="code-line line-covered"><div class="line-number">122</div><div class="line-content">    coverage_dir = joinpath(pkg_dir, <span style="color: #25a268">"</span><span style="color: #25a268">coverage</span><span style="color: #25a268">"</span>)</div></div><div class="code-line line-covered"><div class="line-number">123</div><div class="line-content">    lcov_file = joinpath(coverage_dir, <span style="color: #25a268">"</span><span style="color: #25a268">lcov.info</span><span style="color: #25a268">"</span>)</div></div><div class="code-line line-neutral"><div class="line-number">124</div><div class="line-content">    <span style="color: #76757a"># We do some input checks</span></div></div><div class="code-line line-covered"><div class="line-number">125</div><div class="line-content">    isnothing(html_name) &amp;&amp; (!isnothing(html_function) || !isnothing(lines_function)) &amp;&amp; throw(ArgumentError(<span style="color: #25a268">"</span><span style="color: #25a268">Cannot provide `html_function` or `lines_function` when `html_name` is `nothing`.</span><span style="color: #25a268">"</span>))</div></div><div class="code-line line-neutral"><div class="line-number">126</div><div class="line-content">    <span style="color: #76757a"># Generate the coverage</span></div></div><div class="code-line line-covered"><div class="line-number">127</div><div class="line-content">    cov =</div></div><div class="code-line line-neutral"><div class="line-number">128</div><div class="line-content">        <span style="color: #a51c2c">if</span> use_existing_lcov</div></div><div class="code-line line-covered"><div class="line-number">129</div><div class="line-content">            coverage = LCOV.readfile(lcov_file)</div></div><div class="code-line line-covered"><div class="line-number">130</div><div class="line-content">            eval_coverage_metrics(coverage, pkg_dir)</div></div><div class="code-line line-neutral"><div class="line-number">131</div><div class="line-content">        <span style="color: #a51c2c">else</span></div></div><div class="code-line line-covered"><div class="line-number">132</div><div class="line-content">            file_list = map(extract_included_files(pkg_id)) <span style="color: #a51c2c">do</span> relative_path</div></div><div class="code-line line-covered"><div class="line-number">133</div><div class="line-content">                abspath(pkg_dir, relative_path)</div></div><div class="code-line line-neutral"><div class="line-number">134</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">135</div><div class="line-content">            extensions &amp;&amp; maybe_add_extensions!(file_list, pkg_extensions, pkg_dir)</div></div><div class="code-line line-covered"><div class="line-number">136</div><div class="line-content">            filter!(file_list) <span style="color: #a51c2c">do</span> filename</div></div><div class="code-line line-covered"><div class="line-number">137</div><div class="line-content">                <span style="color: #a51c2c">for<span style=""> needle <span style="">in<span style=""> exclude</span></span></span></span></div></div><div class="code-line line-covered"><div class="line-number">138</div><div class="line-content">                    occursin(needle, filename) &amp;&amp; <span style="color: #a51c2c">return</span> false</div></div><div class="code-line line-covered"><div class="line-number">139</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">140</div><div class="line-content">                <span style="color: #a51c2c">return</span> true</div></div><div class="code-line line-neutral"><div class="line-number">141</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">142</div><div class="line-content">            <span style="color: #a51c2c">try</span></div></div><div class="code-line line-covered"><div class="line-number">143</div><div class="line-content">                LocalCoverage.generate_coverage(</div></div><div class="code-line line-neutral"><div class="line-number">144</div><div class="line-content">                    pkg;</div></div><div class="code-line line-neutral"><div class="line-number">145</div><div class="line-content">                    run_test,</div></div><div class="code-line line-neutral"><div class="line-number">146</div><div class="line-content">                    test_args,</div></div><div class="code-line line-neutral"><div class="line-number">147</div><div class="line-content">                    folder_list = [],</div></div><div class="code-line line-neutral"><div class="line-number">148</div><div class="line-content">                    file_list,</div></div><div class="code-line line-neutral"><div class="line-number">149</div><div class="line-content">                )</div></div><div class="code-line line-neutral"><div class="line-number">150</div><div class="line-content">            <span style="color: #a51c2c">catch</span> e <span style="color: #76757a"># We do this, as the problem with PrettyTables causes an error from within the catch block in LocalCoverage.</span></div></div><div class="code-line line-covered"><div class="line-number">151</div><div class="line-content">                rethrow()</div></div><div class="code-line line-neutral"><div class="line-number">152</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">153</div><div class="line-content">        <span style="color: #a51c2c">end</span> |&gt; WrappedPackageCoverage</div></div><div class="code-line line-covered"><div class="line-number">154</div><div class="line-content">    <span style="color: #a51c2c">if</span> print_to_stdout</div></div><div class="code-line line-covered"><div class="line-number">155</div><div class="line-content">        show(IOContext(stdout, :print_gaps =&gt; true), cov)</div></div><div class="code-line line-neutral"><div class="line-number">156</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">157</div><div class="line-content">    cobertura_file = <span style="color: #a51c2c">if</span> isnothing(cobertura_name) &amp;&amp; isnothing(html_name)</div></div><div class="code-line line-covered"><div class="line-number">158</div><div class="line-content">        nothing</div></div><div class="code-line line-neutral"><div class="line-number">159</div><div class="line-content">    <span style="color: #a51c2c">else</span></div></div><div class="code-line line-covered"><div class="line-number">160</div><div class="line-content">        joinpath(coverage_dir, @something(cobertura_name, <span style="color: #25a268">"</span><span style="color: #25a268">cobertura-coverage.xml</span><span style="color: #25a268">"</span>))</div></div><div class="code-line line-neutral"><div class="line-number">161</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">162</div><div class="line-content">    html_file = isnothing(html_name) ? nothing : joinpath(coverage_dir, html_name)</div></div><div class="code-line line-covered"><div class="line-number">163</div><div class="line-content">    <span style="color: #a51c2c">if</span> !isnothing(cobertura_file)</div></div><div class="code-line line-covered"><div class="line-number">164</div><div class="line-content">        write_lcov_to_xml(cobertura_file, lcov_file)</div></div><div class="code-line line-neutral"><div class="line-number">165</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">166</div><div class="line-content">    <span style="color: #76757a"># Create the cobertura html file with source code</span></div></div><div class="code-line line-covered"><div class="line-number">167</div><div class="line-content">    <span style="color: #a51c2c">if</span> !isnothing(html_file)</div></div><div class="code-line line-covered"><div class="line-number">168</div><div class="line-content">        generate_html_report(</div></div><div class="code-line line-neutral"><div class="line-number">169</div><div class="line-content">            lcov_file,</div></div><div class="code-line line-neutral"><div class="line-number">170</div><div class="line-content">            html_file;</div></div><div class="code-line line-neutral"><div class="line-number">171</div><div class="line-content">            title = pkg_name * <span style="color: #25a268">"</span><span style="color: #25a268"> coverage report</span><span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">172</div><div class="line-content">            pkg_dir,</div></div><div class="code-line line-neutral"><div class="line-number">173</div><div class="line-content">            lines_function,</div></div><div class="code-line line-neutral"><div class="line-number">174</div><div class="line-content">            html_function,</div></div><div class="code-line line-neutral"><div class="line-number">175</div><div class="line-content">        )</div></div><div class="code-line line-neutral"><div class="line-number">176</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">177</div><div class="line-content">    <span style="color: #a51c2c">return</span> (; cov, cobertura_file, html_file)</div></div><div class="code-line line-neutral"><div class="line-number">178</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">179</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">180</div><div class="line-content"><span style="color: #a51c2c">function</span> maybe_add_extensions!(files_list, pkg_extensions, pkg_dir)</div></div><div class="code-line line-covered"><div class="line-number">181</div><div class="line-content">    (isnothing(pkg_extensions) || isempty(pkg_extensions)) &amp;&amp; <span style="color: #a51c2c">return</span> files_list</div></div><div class="code-line line-covered"><div class="line-number">182</div><div class="line-content">    <span style="color: #a51c2c">for<span style=""> <span style="">(<span style="">path, dir, files<span style="">)<span style=""> <span style="">in<span style=""> <span style="">walkdir<span style="">(<span style="">joinpath<span style="">(<span style="">pkg_dir, </span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color: #25a268">"</span><span style="color: #25a268">ext</span><span style="color: #25a268">"</span><span style="color: #a51c2c">)<span style="">)</span></span></div></div><div class="code-line line-covered"><div class="line-number">183</div><div class="line-content">        <span style="color: #a51c2c">for<span style=""> file <span style="">in<span style=""> files</span></span></span></span></div></div><div class="code-line line-covered"><div class="line-number">184</div><div class="line-content">            endswith(file, <span style="color: #25a268">"</span><span style="color: #25a268">.jl</span><span style="color: #25a268">"</span>) || <span style="color: #a51c2c">continue</span></div></div><div class="code-line line-covered"><div class="line-number">185</div><div class="line-content">            noext_name = chopsuffix(file, <span style="color: #25a268">"</span><span style="color: #25a268">.jl</span><span style="color: #25a268">"</span>)</div></div><div class="code-line line-covered"><div class="line-number">186</div><div class="line-content">            <span style="color: #a51c2c">if</span> noext_name in pkg_extensions || basename(path) in pkg_extensions</div></div><div class="code-line line-covered"><div class="line-number">187</div><div class="line-content">                fullpath = joinpath(path, file)</div></div><div class="code-line line-covered"><div class="line-number">188</div><div class="line-content">                push!(files_list, fullpath)</div></div><div class="code-line line-neutral"><div class="line-number">189</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">190</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">191</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">192</div><div class="line-content">    unique!(files_list)</div></div><div class="code-line line-covered"><div class="line-number">193</div><div class="line-content">    <span style="color: #a51c2c">return</span> nothing</div></div><div class="code-line line-neutral"><div class="line-number">194</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">195</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">196</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div></div></div><div class="file-card" id="file-2"><div class="file-header"><div class="file-name">src/show_fix.jl</div><div class="file-stats"><span class="stat"><span class="coverage-badge coverage-excellent">96.88%</span></span><span class="stat"><span>üìä 31/32 lines</span></span><span class="stat"><span>‚ùå 1 missed</span></span></div></div><div class="source-code"><div class="code-line line-neutral"><div class="line-number">1</div><div class="line-content"><span style="color: #a51c2c">using</span> LocalCoverage: PackageCoverage, format_line</div></div><div class="code-line line-neutral"><div class="line-number">2</div><div class="line-content"><span style="color: #a51c2c">using</span> PrettyTables: PrettyTables, pretty_table</div></div><div class="code-line line-neutral"><div class="line-number">3</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">4</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">5</div><div class="line-content"><span style="color: #25a268">    WrappedPackageCoverage(summary::PackageCoverage)</span></div></div><div class="code-line line-neutral"><div class="line-number">6</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">7</div><div class="line-content"><span style="color: #25a268">Structure wrapping the `PackageCoverage` struct to add a custom `show` method for fixing PrettyTables issues until https://github.com/JuliaCI/LocalCoverage.jl/pull/68 is merged.</span></div></div><div class="code-line line-neutral"><div class="line-number">8</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">9</div><div class="line-content"><span style="color: #a51c2c">struct</span> WrappedPackageCoverage</div></div><div class="code-line line-covered"><div class="line-number">10</div><div class="line-content">    summary::PackageCoverage</div></div><div class="code-line line-neutral"><div class="line-number">11</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">12</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">13</div><div class="line-content"><span style="color: #a51c2c">function</span> Base.getproperty(wrapped::WrappedPackageCoverage, s::Symbol)</div></div><div class="code-line line-covered"><div class="line-number">14</div><div class="line-content">    summary = getfield(wrapped, :summary)</div></div><div class="code-line line-covered"><div class="line-number">15</div><div class="line-content">    <span style="color: #a51c2c">if</span> s == :summary</div></div><div class="code-line line-covered"><div class="line-number">16</div><div class="line-content">        <span style="color: #a51c2c">return</span> summary</div></div><div class="code-line line-neutral"><div class="line-number">17</div><div class="line-content">    <span style="color: #a51c2c">else</span></div></div><div class="code-line line-covered"><div class="line-number">18</div><div class="line-content">        <span style="color: #a51c2c">return</span> getfield(summary, s)</div></div><div class="code-line line-neutral"><div class="line-number">19</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">20</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">21</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">22</div><div class="line-content"><span style="color: #a51c2c">function</span> Base.show(io::IO, wrapped::WrappedPackageCoverage)</div></div><div class="code-line line-covered"><div class="line-number">23</div><div class="line-content">    (; summary) = wrapped</div></div><div class="code-line line-covered"><div class="line-number">24</div><div class="line-content">    (; files, package_dir) = summary</div></div><div class="code-line line-covered"><div class="line-number">25</div><div class="line-content">    row_data = map(format_line, files)</div></div><div class="code-line line-covered"><div class="line-number">26</div><div class="line-content">    push!(row_data, format_line(summary))</div></div><div class="code-line line-covered"><div class="line-number">27</div><div class="line-content">    row_coverage = map(x <span style="color: #a51c2c">-&gt;</span> x.coverage_percentage, row_data)</div></div><div class="code-line line-covered"><div class="line-number">28</div><div class="line-content">    rows = map(row_data) <span style="color: #a51c2c">do</span> row</div></div><div class="code-line line-covered"><div class="line-number">29</div><div class="line-content">        (; name, total, hit, missed, coverage_percentage, gaps) = row</div></div><div class="code-line line-covered"><div class="line-number">30</div><div class="line-content">        percentage = isnan(coverage_percentage) ? <span style="color: #25a268">"</span><span style="color: #25a268">-</span><span style="color: #25a268">"</span> : <span style="color: #25a268">"</span>$(round(Int, coverage_percentage))<span style="color: #25a268">%</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">31</div><div class="line-content">        (; name, total, hit, missed, percentage, gaps)</div></div><div class="code-line line-neutral"><div class="line-number">32</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">33</div><div class="line-content">    header = [<span style="color: #25a268">"</span><span style="color: #25a268">Filename</span><span style="color: #25a268">"</span>, <span style="color: #25a268">"</span><span style="color: #25a268">Lines</span><span style="color: #25a268">"</span>, <span style="color: #25a268">"</span><span style="color: #25a268">Hit</span><span style="color: #25a268">"</span>, <span style="color: #25a268">"</span><span style="color: #25a268">Miss</span><span style="color: #25a268">"</span>, <span style="color: #25a268">"</span><span style="color: #25a268">%</span><span style="color: #25a268">"</span>]</div></div><div class="code-line line-covered"><div class="line-number">34</div><div class="line-content">    percentage_column = length(header)</div></div><div class="code-line line-covered"><div class="line-number">35</div><div class="line-content">    alignment = [:l, :r, :r, :r, :r]</div></div><div class="code-line line-covered"><div class="line-number">36</div><div class="line-content">    columns_width = fill(-1, 5) <span style="color: #76757a"># We need strictly negative number to autosize in PrettyTables 3.0, but this also works in v2</span></div></div><div class="code-line line-covered"><div class="line-number">37</div><div class="line-content">    <span style="color: #a51c2c">if</span> get(io, :print_gaps, false)</div></div><div class="code-line line-covered"><div class="line-number">38</div><div class="line-content">        push!(header, <span style="color: #25a268">"</span><span style="color: #25a268">Gaps</span><span style="color: #25a268">"</span>)</div></div><div class="code-line line-covered"><div class="line-number">39</div><div class="line-content">        push!(alignment, :l)</div></div><div class="code-line line-covered"><div class="line-number">40</div><div class="line-content">        display_cols = last(get(io, :displaysize, 100))</div></div><div class="code-line line-covered"><div class="line-number">41</div><div class="line-content">        push!(columns_width, display_cols - 45)</div></div><div class="code-line line-neutral"><div class="line-number">42</div><div class="line-content">    <span style="color: #a51c2c">else</span></div></div><div class="code-line line-uncovered"><div class="line-number">43</div><div class="line-content">        rows = map(row <span style="color: #a51c2c">-&gt;</span> Base.structdiff(row, NamedTuple{(:gaps,)}), rows)</div></div><div class="code-line line-neutral"><div class="line-number">44</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">45</div><div class="line-content">    <span style="color: #76757a"># PrettyTables 3.0 changed Highlighter to TextHighlighter, which up to currently published version (v3.10) does not provide the kwargs constructor (despite having it documented). We create here a patch to handle both cases</span></div></div><div class="code-line line-covered"><div class="line-number">46</div><div class="line-content">    Highlighter(f; kwargs...) = @static <span style="color: #a51c2c">if</span> pkgversion(PrettyTables) &lt; v<span style="color: #25a268">"</span><span style="color: #25a268">3.0.0</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">47</div><div class="line-content">        PrettyTables.Highlighter(f; kwargs...)</div></div><div class="code-line line-neutral"><div class="line-number">48</div><div class="line-content">    <span style="color: #a51c2c">else</span></div></div><div class="code-line line-covered"><div class="line-number">49</div><div class="line-content">        PrettyTables.TextHighlighter(f, PrettyTables.Crayon(;kwargs...))</div></div><div class="code-line line-neutral"><div class="line-number">50</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">51</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">52</div><div class="line-content">    highlighters = (</div></div><div class="code-line line-neutral"><div class="line-number">53</div><div class="line-content">        Highlighter(</div></div><div class="code-line line-covered"><div class="line-number">54</div><div class="line-content">            (data, i, j) <span style="color: #a51c2c">-&gt;</span> j == percentage_column &amp;&amp; row_coverage[i] &lt;= 50,</div></div><div class="code-line line-neutral"><div class="line-number">55</div><div class="line-content">            bold = true,</div></div><div class="code-line line-neutral"><div class="line-number">56</div><div class="line-content">            foreground = :red,</div></div><div class="code-line line-neutral"><div class="line-number">57</div><div class="line-content">        ),</div></div><div class="code-line line-covered"><div class="line-number">58</div><div class="line-content">        Highlighter((data, i, j) <span style="color: #a51c2c">-&gt;</span> j == percentage_column &amp;&amp; row_coverage[i] &lt;= 70,</div></div><div class="code-line line-neutral"><div class="line-number">59</div><div class="line-content">                    foreground = :yellow),</div></div><div class="code-line line-covered"><div class="line-number">60</div><div class="line-content">        Highlighter((data, i, j) <span style="color: #a51c2c">-&gt;</span> j == percentage_column &amp;&amp; row_coverage[i] &gt;= 90,</div></div><div class="code-line line-neutral"><div class="line-number">61</div><div class="line-content">                    foreground = :green),</div></div><div class="code-line line-neutral"><div class="line-number">62</div><div class="line-content">    )</div></div><div class="code-line line-neutral"><div class="line-number">63</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">64</div><div class="line-content">    <span style="color: #76757a"># Kwargs of `</span><span style="color: #0097a7">pretty_table</span><span style="color: #76757a">` itself also changed in PrettyTables 3.0, so we have to branch here as well</span></div></div><div class="code-line line-neutral"><div class="line-number">65</div><div class="line-content">    @static <span style="color: #a51c2c">if</span> pkgversion(PrettyTables) &lt; v<span style="color: #25a268">"</span><span style="color: #25a268">3.0.0</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">66</div><div class="line-content">        pretty_table(</div></div><div class="code-line line-neutral"><div class="line-number">67</div><div class="line-content">            io,</div></div><div class="code-line line-neutral"><div class="line-number">68</div><div class="line-content">            rows;</div></div><div class="code-line line-neutral"><div class="line-number">69</div><div class="line-content">            title = <span style="color: #25a268">"</span><span style="color: #25a268">Coverage of </span>$(package_dir)<span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">70</div><div class="line-content">            header,</div></div><div class="code-line line-neutral"><div class="line-number">71</div><div class="line-content">            alignment,</div></div><div class="code-line line-neutral"><div class="line-number">72</div><div class="line-content">            crop = :none,</div></div><div class="code-line line-neutral"><div class="line-number">73</div><div class="line-content">            linebreaks = true,</div></div><div class="code-line line-neutral"><div class="line-number">74</div><div class="line-content">            columns_width,</div></div><div class="code-line line-neutral"><div class="line-number">75</div><div class="line-content">            autowrap = true,</div></div><div class="code-line line-neutral"><div class="line-number">76</div><div class="line-content">            highlighters,</div></div><div class="code-line line-neutral"><div class="line-number">77</div><div class="line-content">            body_hlines = [length(rows) - 1],</div></div><div class="code-line line-neutral"><div class="line-number">78</div><div class="line-content">        )</div></div><div class="code-line line-neutral"><div class="line-number">79</div><div class="line-content">    <span style="color: #a51c2c">else</span></div></div><div class="code-line line-covered"><div class="line-number">80</div><div class="line-content">        pretty_table(</div></div><div class="code-line line-neutral"><div class="line-number">81</div><div class="line-content">            io,</div></div><div class="code-line line-neutral"><div class="line-number">82</div><div class="line-content">            rows;</div></div><div class="code-line line-neutral"><div class="line-number">83</div><div class="line-content">            title = <span style="color: #25a268">"</span><span style="color: #25a268">Coverage of </span>$(package_dir)<span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">84</div><div class="line-content">            column_labels = [header],</div></div><div class="code-line line-neutral"><div class="line-number">85</div><div class="line-content">            alignment,</div></div><div class="code-line line-neutral"><div class="line-number">86</div><div class="line-content">            <span style="color: #76757a"># The crop kwarg is not present anymore, split into the next two ones</span></div></div><div class="code-line line-neutral"><div class="line-number">87</div><div class="line-content">            fit_table_in_display_horizontally = false,</div></div><div class="code-line line-neutral"><div class="line-number">88</div><div class="line-content">            fit_table_in_display_vertically = false,</div></div><div class="code-line line-neutral"><div class="line-number">89</div><div class="line-content">            line_breaks = true,</div></div><div class="code-line line-neutral"><div class="line-number">90</div><div class="line-content">            fixed_data_column_widths = columns_width,</div></div><div class="code-line line-neutral"><div class="line-number">91</div><div class="line-content">            auto_wrap = true,</div></div><div class="code-line line-neutral"><div class="line-number">92</div><div class="line-content">            highlighters = collect(highlighters), <span style="color: #76757a"># v3 expects a vector instead of a Tuple</span></div></div><div class="code-line line-neutral"><div class="line-number">93</div><div class="line-content">            table_format = PrettyTables.TextTableFormat(;</div></div><div class="code-line line-neutral"><div class="line-number">94</div><div class="line-content">                horizontal_lines_at_data_rows = [length(rows) - 1],</div></div><div class="code-line line-neutral"><div class="line-number">95</div><div class="line-content">            ),</div></div><div class="code-line line-neutral"><div class="line-number">96</div><div class="line-content">        )</div></div><div class="code-line line-neutral"><div class="line-number">97</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">98</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div></div><div class="missing-lines"><strong>Uncovered Lines: </strong>43</div></div><div class="file-card" id="file-3"><div class="file-header"><div class="file-name">src/html_report.jl</div><div class="file-stats"><span class="stat"><span class="coverage-badge coverage-excellent">98.21%</span></span><span class="stat"><span>üìä 110/112 lines</span></span><span class="stat"><span>‚ùå 2 missed</span></span></div></div><div class="source-code"><div class="code-line line-neutral"><div class="line-number">1</div><div class="line-content"><span style="color: #76757a"># The CSS and html structure within this file was mostly generated by Claude and further refined.</span></div></div><div class="code-line line-neutral"><div class="line-number">2</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">3</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">4</div><div class="line-content"><span style="color: #25a268">    modern_css_styles() -&gt; String</span></div></div><div class="code-line line-neutral"><div class="line-number">5</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">6</div><div class="line-content"><span style="color: #25a268">Return modern CSS styling for the coverage report.</span></div></div><div class="code-line line-neutral"><div class="line-number">7</div><div class="line-content"><span style="color: #25a268">Fully static, no runtime JavaScript required.</span></div></div><div class="code-line line-neutral"><div class="line-number">8</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">9</div><div class="line-content"><span style="color: #a51c2c">function</span> modern_css_styles()</div></div><div class="code-line line-covered"><div class="line-number">10</div><div class="line-content">    <span style="color: #a51c2c">return</span> read(joinpath(@__DIR__, <span style="color: #25a268">"</span><span style="color: #25a268">style.css</span><span style="color: #25a268">"</span>), String)</div></div><div class="code-line line-neutral"><div class="line-number">11</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">12</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">13</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">14</div><div class="line-content"><span style="color: #25a268">    highlight_with_show(line::Union{AnnotatedString, SubString{&lt;:AnnotatedString}}) -&gt; String</span></div></div><div class="code-line line-neutral"><div class="line-number">15</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">16</div><div class="line-content"><span style="color: #25a268">Take as input an annotated string containing synthax highlighting and generate an HTML representation of it using the `show` method with `MIME"text/html"()`, relying on `StyledStrings.jl` implementation to create HTML with synthax highlighting.</span></div></div><div class="code-line line-neutral"><div class="line-number">17</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">18</div><div class="line-content"><span style="color: #a51c2c">function</span> highlight_with_show <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">19</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">20</div><div class="line-content"><span style="color: #a51c2c">function</span> calculate_file_stats(file::FileCoverageSummary)</div></div><div class="code-line line-covered"><div class="line-number">21</div><div class="line-content">    total_lines = file.lines_tracked</div></div><div class="code-line line-covered"><div class="line-number">22</div><div class="line-content">    covered_lines = file.lines_hit</div></div><div class="code-line line-covered"><div class="line-number">23</div><div class="line-content">    missed_lines = total_lines - covered_lines</div></div><div class="code-line line-covered"><div class="line-number">24</div><div class="line-content">    coverage_pct = total_lines == 0 ? 100.0 : (covered_lines / total_lines) * 100.0</div></div><div class="code-line line-neutral"><div class="line-number">25</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">26</div><div class="line-content">    <span style="color: #a51c2c">return</span> (;</div></div><div class="code-line line-neutral"><div class="line-number">27</div><div class="line-content">        total = total_lines,</div></div><div class="code-line line-neutral"><div class="line-number">28</div><div class="line-content">        covered = covered_lines,</div></div><div class="code-line line-neutral"><div class="line-number">29</div><div class="line-content">        missed = missed_lines,</div></div><div class="code-line line-neutral"><div class="line-number">30</div><div class="line-content">        coverage = coverage_pct,</div></div><div class="code-line line-neutral"><div class="line-number">31</div><div class="line-content">        missing_str = format_gaps(file),</div></div><div class="code-line line-neutral"><div class="line-number">32</div><div class="line-content">    )</div></div><div class="code-line line-neutral"><div class="line-number">33</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">34</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">35</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">36</div><div class="line-content"><span style="color: #25a268">    coverage_badge_class(coverage::Float64) -&gt; String</span></div></div><div class="code-line line-neutral"><div class="line-number">37</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">38</div><div class="line-content"><span style="color: #25a268">Return CSS class for coverage badge based on coverage percentage.</span></div></div><div class="code-line line-neutral"><div class="line-number">39</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">40</div><div class="line-content"><span style="color: #a51c2c">function</span> coverage_badge_class(coverage::Float64)</div></div><div class="code-line line-covered"><div class="line-number">41</div><div class="line-content">    <span style="color: #a51c2c">return</span> coverage &gt;= 80 ? <span style="color: #25a268">"</span><span style="color: #25a268">coverage-excellent</span><span style="color: #25a268">"</span> :</div></div><div class="code-line line-neutral"><div class="line-number">42</div><div class="line-content">           coverage &gt;= 60 ? <span style="color: #25a268">"</span><span style="color: #25a268">coverage-good</span><span style="color: #25a268">"</span> :</div></div><div class="code-line line-neutral"><div class="line-number">43</div><div class="line-content">                            <span style="color: #25a268">"</span><span style="color: #25a268">coverage-poor</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">44</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">45</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">46</div><div class="line-content">@component <span style="color: #a51c2c">function</span> file_summary_table_component(; data::PackageCoverage)</div></div><div class="code-line line-neutral"><div class="line-number">47</div><div class="line-content">    @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">summary-table-section</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">48</div><div class="line-content">        @h2 <span style="color: #25a268">"</span><span style="color: #25a268">üìã Files Overview</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">49</div><div class="line-content">        @table {class = <span style="color: #25a268">"</span><span style="color: #25a268">file-summary-table</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">50</div><div class="line-content">            @thead <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">51</div><div class="line-content">                @tr <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">52</div><div class="line-content">                    @th <span style="color: #25a268">"</span><span style="color: #25a268">File</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">53</div><div class="line-content">                    @th {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Total Lines</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">54</div><div class="line-content">                    @th {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Covered</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">55</div><div class="line-content">                    @th {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Missed</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">56</div><div class="line-content">                    @th {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Coverage</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">57</div><div class="line-content">                    @th <span style="color: #25a268">"</span><span style="color: #25a268">Missing Lines</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">58</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">59</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">60</div><div class="line-content">            @tbody <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">61</div><div class="line-content">                <span style="color: #a51c2c">for<span style=""> <span style="">(<span style="">idx, file<span style="">)<span style=""> <span style="">in<span style=""> <span style="">enumerate<span style="">(<span style="">data.files<span style="">)</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="code-line line-covered"><div class="line-number">62</div><div class="line-content">                    fname = file.filename</div></div><div class="code-line line-covered"><div class="line-number">63</div><div class="line-content">                    stats = calculate_file_stats(file)</div></div><div class="code-line line-covered"><div class="line-number">64</div><div class="line-content">                    badge_class = coverage_badge_class(stats.coverage)</div></div><div class="code-line line-covered"><div class="line-number">65</div><div class="line-content">                    file_anchor = <span style="color: #25a268">"</span><span style="color: #25a268">file-</span>$idx<span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">66</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">67</div><div class="line-content">                    @tr <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">68</div><div class="line-content">                        @td <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">69</div><div class="line-content">                            @a {class = <span style="color: #25a268">"</span><span style="color: #25a268">file-link</span><span style="color: #25a268">"</span>, href = <span style="color: #25a268">"</span><span style="color: #25a268">#</span>$file_anchor<span style="color: #25a268">"</span>} $(fname)</div></div><div class="code-line line-neutral"><div class="line-number">70</div><div class="line-content">                        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">71</div><div class="line-content">                        @td {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} $(stats.total)</div></div><div class="code-line line-covered"><div class="line-number">72</div><div class="line-content">                        @td {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} $(stats.covered)</div></div><div class="code-line line-covered"><div class="line-number">73</div><div class="line-content">                        @td {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} $(stats.missed)</div></div><div class="code-line line-covered"><div class="line-number">74</div><div class="line-content">                        @td {class = <span style="color: #25a268">"</span><span style="color: #25a268">stats-cell</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">75</div><div class="line-content">                            @span {class = <span style="color: #25a268">"</span><span style="color: #25a268">coverage-badge </span>$badge_class<span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(round(stats.coverage, digits=2))<span style="color: #25a268">%</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">76</div><div class="line-content">                        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">77</div><div class="line-content">                        @td {class = <span style="color: #25a268">"</span><span style="color: #25a268">missing-cell</span><span style="color: #25a268">"</span>} $(</div></div><div class="code-line line-neutral"><div class="line-number">78</div><div class="line-content">                            isempty(stats.missing_str) ? <span style="color: #25a268">"</span><span style="color: #25a268">‚Äî</span><span style="color: #25a268">"</span> : stats.missing_str</div></div><div class="code-line line-neutral"><div class="line-number">79</div><div class="line-content">                        )</div></div><div class="code-line line-neutral"><div class="line-number">80</div><div class="line-content">                    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">81</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">82</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">83</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">84</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">85</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">86</div><div class="line-content">@deftag <span style="color: #a51c2c">macro</span> file_summary_table_component <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">87</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">88</div><div class="line-content"><span style="color: #76757a"># Component that renders the summary metrics section</span></div></div><div class="code-line line-covered"><div class="line-number">89</div><div class="line-content">@component <span style="color: #a51c2c">function</span> summary_section_component(; data::PackageCoverage)</div></div><div class="code-line line-neutral"><div class="line-number">90</div><div class="line-content">    lines_covered = data.lines_hit</div></div><div class="code-line line-neutral"><div class="line-number">91</div><div class="line-content">    lines_valid = data.lines_tracked</div></div><div class="code-line line-neutral"><div class="line-number">92</div><div class="line-content">    coverage_pct = (lines_covered / lines_valid) * 100</div></div><div class="code-line line-neutral"><div class="line-number">93</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">94</div><div class="line-content">    @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">summary</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">95</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">96</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-label</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Total Coverage</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">97</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-value</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(round(coverage_pct, digits=2))<span style="color: #25a268">%</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">98</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-subtext</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(lines_covered)<span style="color: #25a268"> of </span>$(lines_valid)<span style="color: #25a268"> lines</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">99</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">100</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">101</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-label</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Lines Covered</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">102</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-value</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(lines_covered)<span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">103</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-subtext</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"<span style="">"</span></span></div></div><div class="code-line line-neutral"><div class="line-number">104</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">105</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">106</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-label</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Lines Uncovered</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">107</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-value</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(lines_valid - lines_covered)<span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">108</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-subtext</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"<span style="">"</span></span></div></div><div class="code-line line-neutral"><div class="line-number">109</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">110</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">111</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-label</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span><span style="color: #25a268">Tracked Files</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">112</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-value</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(length(data.files))<span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">113</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">metric-subtext</span><span style="color: #25a268">"</span>} <span style="color: #25a268">"<span style="">"</span></span></div></div><div class="code-line line-neutral"><div class="line-number">114</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">115</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">116</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">117</div><div class="line-content">@deftag <span style="color: #a51c2c">macro</span> summary_section_component <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">118</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">119</div><div class="line-content"><span style="color: #76757a"># Component that renders a single line of source code with coverage highlighting</span></div></div><div class="code-line line-covered"><div class="line-number">120</div><div class="line-content">@component <span style="color: #a51c2c">function</span> code_line_component(;</div></div><div class="code-line line-neutral"><div class="line-number">121</div><div class="line-content">    line_num::Int,</div></div><div class="code-line line-neutral"><div class="line-number">122</div><div class="line-content">    content::AbstractString,</div></div><div class="code-line line-neutral"><div class="line-number">123</div><div class="line-content">    hits::Union{Int,Nothing},</div></div><div class="code-line line-neutral"><div class="line-number">124</div><div class="line-content">    html_function</div></div><div class="code-line line-neutral"><div class="line-number">125</div><div class="line-content">)</div></div><div class="code-line line-neutral"><div class="line-number">126</div><div class="line-content">    line_class = <span style="color: #a51c2c">if</span> isnothing(hits)</div></div><div class="code-line line-neutral"><div class="line-number">127</div><div class="line-content">        <span style="color: #25a268">"</span><span style="color: #25a268">code-line line-neutral</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">128</div><div class="line-content">    <span style="color: #a51c2c">elseif</span> hits &gt; 0</div></div><div class="code-line line-neutral"><div class="line-number">129</div><div class="line-content">        <span style="color: #25a268">"</span><span style="color: #25a268">code-line line-covered</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">130</div><div class="line-content">    <span style="color: #a51c2c">else</span></div></div><div class="code-line line-neutral"><div class="line-number">131</div><div class="line-content">        <span style="color: #25a268">"</span><span style="color: #25a268">code-line line-uncovered</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">132</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">133</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">134</div><div class="line-content">    <span style="color: #76757a"># Apply syntax highlighting</span></div></div><div class="code-line line-neutral"><div class="line-number">135</div><div class="line-content">    highlighted_content = html_function(content)</div></div><div class="code-line line-neutral"><div class="line-number">136</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">137</div><div class="line-content">    @div {class = line_class} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">138</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">line-number</span><span style="color: #25a268">"</span>} $line_num</div></div><div class="code-line line-covered"><div class="line-number">139</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">line-content</span><span style="color: #25a268">"</span>} @text highlighted_content</div></div><div class="code-line line-neutral"><div class="line-number">140</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">141</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">142</div><div class="line-content">@deftag <span style="color: #a51c2c">macro</span> code_line_component <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">143</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">144</div><div class="line-content"><span style="color: #76757a"># Component that renders a single file card with coverage information and source code</span></div></div><div class="code-line line-covered"><div class="line-number">145</div><div class="line-content">@component <span style="color: #a51c2c">function</span> file_card_component(;</div></div><div class="code-line line-neutral"><div class="line-number">146</div><div class="line-content">    file::FileCoverageSummary,</div></div><div class="code-line line-neutral"><div class="line-number">147</div><div class="line-content">    pkg_dir::String,</div></div><div class="code-line line-neutral"><div class="line-number">148</div><div class="line-content">    file_index::Int,</div></div><div class="code-line line-neutral"><div class="line-number">149</div><div class="line-content">    lines_hits::Vector{Union{Int,Nothing}},</div></div><div class="code-line line-neutral"><div class="line-number">150</div><div class="line-content">    lines_function,</div></div><div class="code-line line-neutral"><div class="line-number">151</div><div class="line-content">    html_function,</div></div><div class="code-line line-neutral"><div class="line-number">152</div><div class="line-content">)</div></div><div class="code-line line-neutral"><div class="line-number">153</div><div class="line-content">    stats = calculate_file_stats(file)</div></div><div class="code-line line-neutral"><div class="line-number">154</div><div class="line-content">    source_lines = extract_file_lines(lines_function, file.filename, pkg_dir)</div></div><div class="code-line line-neutral"><div class="line-number">155</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">156</div><div class="line-content">    badge_class = coverage_badge_class(stats.coverage)</div></div><div class="code-line line-neutral"><div class="line-number">157</div><div class="line-content">    file_anchor = <span style="color: #25a268">"</span><span style="color: #25a268">file-</span>$file_index<span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">158</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">159</div><div class="line-content">    @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">file-card</span><span style="color: #25a268">"</span>, id = file_anchor} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">160</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">file-header</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">161</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">file-name</span><span style="color: #25a268">"</span>} $(file.filename)</div></div><div class="code-line line-covered"><div class="line-number">162</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">file-stats</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">163</div><div class="line-content">                @span {class = <span style="color: #25a268">"</span><span style="color: #25a268">stat</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">164</div><div class="line-content">                    @span {class = <span style="color: #25a268">"</span><span style="color: #25a268">coverage-badge </span>$badge_class<span style="color: #25a268">"</span>} <span style="color: #25a268">"</span>$(round(stats.coverage, digits=2))<span style="color: #25a268">%</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">165</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">166</div><div class="line-content">                @span {class = <span style="color: #25a268">"</span><span style="color: #25a268">stat</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">167</div><div class="line-content">                    @span <span style="color: #25a268">"</span><span style="color: #25a268">üìä </span>$(stats.covered)<span style="color: #25a268">/</span>$(stats.total)<span style="color: #25a268"> lines</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">168</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">169</div><div class="line-content">                @span {class = <span style="color: #25a268">"</span><span style="color: #25a268">stat</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">170</div><div class="line-content">                    @span <span style="color: #25a268">"</span><span style="color: #25a268">‚ùå </span>$(stats.missed)<span style="color: #25a268"> missed</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">171</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">172</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">173</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">174</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">175</div><div class="line-content">        <span style="color: #76757a"># Source code section</span></div></div><div class="code-line line-covered"><div class="line-number">176</div><div class="line-content">        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">source-code</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">177</div><div class="line-content">            <span style="color: #a51c2c">for<span style=""> <span style="">(<span style="">i, line<span style="">)<span style=""> <span style="">in<span style=""> <span style="">enumerate<span style="">(<span style="">source_lines<span style="">)</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="code-line line-covered"><div class="line-number">178</div><div class="line-content">                @code_line_component {</div></div><div class="code-line line-neutral"><div class="line-number">179</div><div class="line-content">                    line_num = i,</div></div><div class="code-line line-neutral"><div class="line-number">180</div><div class="line-content">                    content = line,</div></div><div class="code-line line-neutral"><div class="line-number">181</div><div class="line-content">                    hits = i &gt; length(lines_hits) ? nothing : lines_hits[i],</div></div><div class="code-line line-neutral"><div class="line-number">182</div><div class="line-content">                    html_function</div></div><div class="code-line line-neutral"><div class="line-number">183</div><div class="line-content">                }</div></div><div class="code-line line-covered"><div class="line-number">184</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">185</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">186</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">187</div><div class="line-content">        <span style="color: #76757a"># Missing lines section</span></div></div><div class="code-line line-covered"><div class="line-number">188</div><div class="line-content">        <span style="color: #a51c2c">if</span> !isempty(stats.missing_str)</div></div><div class="code-line line-covered"><div class="line-number">189</div><div class="line-content">            @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">missing-lines</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">190</div><div class="line-content">                @strong <span style="color: #25a268">"</span><span style="color: #25a268">Uncovered Lines: </span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">191</div><div class="line-content">                @text stats.missing_str</div></div><div class="code-line line-neutral"><div class="line-number">192</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">193</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">194</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">195</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">196</div><div class="line-content">@deftag <span style="color: #a51c2c">macro</span> file_card_component <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">197</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">198</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">199</div><div class="line-content"><span style="color: #25a268">    generate_html_report(lcov_file, html_file; title = nothing, pkg_dir = nothing)</span></div></div><div class="code-line line-neutral"><div class="line-number">200</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">201</div><div class="line-content"><span style="color: #25a268">Generate a static HTML report from a LCOV file using a native Julia solution.</span></div></div><div class="code-line line-neutral"><div class="line-number">202</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">203</div><div class="line-content"><span style="color: #25a268">The `lcov_file` and `html_file` arguments are the full paths to the LCOV file used as input and of the HTML file to be generated, respectively.</span></div></div><div class="code-line line-neutral"><div class="line-number">204</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">205</div><div class="line-content"><span style="color: #25a268"># Keyword arguments</span></div></div><div class="code-line line-neutral"><div class="line-number">206</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">207</div><div class="line-content"><span style="color: #25a268">- `title = "Package Coverage Report"` is the title used at the top of the HTML report.</span></div></div><div class="code-line line-neutral"><div class="line-number">208</div><div class="line-content"><span style="color: #25a268">- `pkg_dir` is the directory of the package being covered. It is used to generate the source code links in the HTML report.</span></div></div><div class="code-line line-neutral"><div class="line-number">209</div><div class="line-content"><span style="color: #25a268">- `lines_function` is a function that takes an `IO` stream representing the contents of a file and returns a vector of `AbstractString` objects representing each line of the source file. When not provided, it defaults to [`ExtendedLocalCoverage.default_lines_function`](@ref).</span></div></div><div class="code-line line-neutral"><div class="line-number">210</div><div class="line-content"><span style="color: #25a268">- `html_function` is a function that takes a single line of source code as an `AbstractString` and returns an HTML-safe representation of that line, potentially with syntax highlighting. When not provided, it defaults to [`ExtendedLocalCoverage.default_html_function`](@ref).</span></div></div><div class="code-line line-neutral"><div class="line-number">211</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-covered"><div class="line-number">212</div><div class="line-content"><span style="color: #a51c2c">function</span> generate_html_report(</div></div><div class="code-line line-neutral"><div class="line-number">213</div><div class="line-content">    lcov_file::String,</div></div><div class="code-line line-neutral"><div class="line-number">214</div><div class="line-content">    output_file::String;</div></div><div class="code-line line-neutral"><div class="line-number">215</div><div class="line-content">    title::String = <span style="color: #25a268">"</span><span style="color: #25a268">Coverage Report</span><span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">216</div><div class="line-content">    pkg_dir::String,</div></div><div class="code-line line-neutral"><div class="line-number">217</div><div class="line-content">    lines_function = nothing,</div></div><div class="code-line line-neutral"><div class="line-number">218</div><div class="line-content">    html_function = nothing,</div></div><div class="code-line line-neutral"><div class="line-number">219</div><div class="line-content">)</div></div><div class="code-line line-neutral"><div class="line-number">220</div><div class="line-content">    <span style="color: #76757a"># Eventually set defaults for lines and html functions depending on loaded extensions</span></div></div><div class="code-line line-covered"><div class="line-number">221</div><div class="line-content">    lines_function = @something lines_function default_lines_function()</div></div><div class="code-line line-covered"><div class="line-number">222</div><div class="line-content">    html_function = @something html_function default_html_function(lines_function)</div></div><div class="code-line line-neutral"><div class="line-number">223</div><div class="line-content">    <span style="color: #76757a"># Parse the LCOV file</span></div></div><div class="code-line line-covered"><div class="line-number">224</div><div class="line-content">    raw_coverage = LCOV.readfile(lcov_file)</div></div><div class="code-line line-neutral"><div class="line-number">225</div><div class="line-content">    <span style="color: #76757a"># Make the package directory absolute</span></div></div><div class="code-line line-covered"><div class="line-number">226</div><div class="line-content">    pkg_dir = abspath(pkg_dir)</div></div><div class="code-line line-neutral"><div class="line-number">227</div><div class="line-content">    <span style="color: #76757a"># We make the filepaths absolute</span></div></div><div class="code-line line-covered"><div class="line-number">228</div><div class="line-content">    foreach(raw_coverage) <span style="color: #a51c2c">do</span> fc</div></div><div class="code-line line-covered"><div class="line-number">229</div><div class="line-content">        fc.filename = abspath(pkg_dir, fc.filename)</div></div><div class="code-line line-neutral"><div class="line-number">230</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">231</div><div class="line-content">    data = eval_coverage_metrics(raw_coverage, pkg_dir)</div></div><div class="code-line line-neutral"><div class="line-number">232</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">233</div><div class="line-content">    <span style="color: #76757a"># Write to file</span></div></div><div class="code-line line-covered"><div class="line-number">234</div><div class="line-content">    open(output_file, <span style="color: #25a268">"</span><span style="color: #25a268">w</span><span style="color: #25a268">"</span>) <span style="color: #a51c2c">do</span> io</div></div><div class="code-line line-neutral"><div class="line-number">235</div><div class="line-content">        <span style="color: #76757a"># We disable debug mode which is automatically enabled in HypertextTemplates.jl when Revise is loaded. This is a hack as mentioned in https://github.com/MichaelHatherly/HypertextTemplates.jl/issues/36#issuecomment-3004032438</span></div></div><div class="code-line line-covered"><div class="line-number">236</div><div class="line-content">        ctx = IOContext(io, HypertextTemplates._include_data_htloc() =&gt; false)</div></div><div class="code-line line-covered"><div class="line-number">237</div><div class="line-content">        @render ctx <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">238</div><div class="line-content">            @html {lang = <span style="color: #25a268">"</span><span style="color: #25a268">en</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">239</div><div class="line-content">                @head <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">240</div><div class="line-content">                    @meta {charset = <span style="color: #25a268">"</span><span style="color: #25a268">UTF-8</span><span style="color: #25a268">"</span>}</div></div><div class="code-line line-covered"><div class="line-number">241</div><div class="line-content">                    @meta {</div></div><div class="code-line line-neutral"><div class="line-number">242</div><div class="line-content">                        name = <span style="color: #25a268">"</span><span style="color: #25a268">viewport</span><span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">243</div><div class="line-content">                        content = <span style="color: #25a268">"</span><span style="color: #25a268">width=device-width, initial-scale=1.0</span><span style="color: #25a268">"</span>,</div></div><div class="code-line line-neutral"><div class="line-number">244</div><div class="line-content">                    }</div></div><div class="code-line line-covered"><div class="line-number">245</div><div class="line-content">                    @title $title</div></div><div class="code-line line-covered"><div class="line-number">246</div><div class="line-content">                    @style @text modern_css_styles()</div></div><div class="code-line line-neutral"><div class="line-number">247</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-covered"><div class="line-number">248</div><div class="line-content">                @body <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">249</div><div class="line-content">                    @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">container</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-neutral"><div class="line-number">250</div><div class="line-content">                        <span style="color: #76757a"># Header</span></div></div><div class="code-line line-covered"><div class="line-number">251</div><div class="line-content">                        @header <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">252</div><div class="line-content">                            @h1 $title</div></div><div class="code-line line-neutral"><div class="line-number">253</div><div class="line-content">                        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">254</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">255</div><div class="line-content">                        <span style="color: #76757a"># Summary metrics</span></div></div><div class="code-line line-covered"><div class="line-number">256</div><div class="line-content">                        @summary_section_component {data = data}</div></div><div class="code-line line-neutral"><div class="line-number">257</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">258</div><div class="line-content">                        <span style="color: #76757a"># File summary table</span></div></div><div class="code-line line-covered"><div class="line-number">259</div><div class="line-content">                        @file_summary_table_component {data = data}</div></div><div class="code-line line-neutral"><div class="line-number">260</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">261</div><div class="line-content">                        <span style="color: #76757a"># File coverage details</span></div></div><div class="code-line line-covered"><div class="line-number">262</div><div class="line-content">                        @div {class = <span style="color: #25a268">"</span><span style="color: #25a268">files-section</span><span style="color: #25a268">"</span>} <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">263</div><div class="line-content">                            @h2 <span style="color: #25a268">"</span><span style="color: #25a268">üìÅ File Coverage Details</span><span style="color: #25a268">"</span></div></div><div class="code-line line-covered"><div class="line-number">264</div><div class="line-content">                            <span style="color: #a51c2c">for<span style=""> <span style="">(<span style="">idx, file<span style="">)<span style=""> <span style="">in<span style=""> <span style="">enumerate<span style="">(<span style="">data.files<span style="">)</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="code-line line-covered"><div class="line-number">265</div><div class="line-content">                                @file_card_component {</div></div><div class="code-line line-neutral"><div class="line-number">266</div><div class="line-content">                                    file = file,</div></div><div class="code-line line-neutral"><div class="line-number">267</div><div class="line-content">                                    pkg_dir = pkg_dir,</div></div><div class="code-line line-neutral"><div class="line-number">268</div><div class="line-content">                                    file_index = idx,</div></div><div class="code-line line-neutral"><div class="line-number">269</div><div class="line-content">                                    lines_hits = raw_coverage[idx].coverage,</div></div><div class="code-line line-neutral"><div class="line-number">270</div><div class="line-content">                                    lines_function,</div></div><div class="code-line line-neutral"><div class="line-number">271</div><div class="line-content">                                    html_function</div></div><div class="code-line line-neutral"><div class="line-number">272</div><div class="line-content">                                }</div></div><div class="code-line line-covered"><div class="line-number">273</div><div class="line-content">                            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">274</div><div class="line-content">                        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">275</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">276</div><div class="line-content">                        <span style="color: #76757a"># Footer</span></div></div><div class="code-line line-covered"><div class="line-number">277</div><div class="line-content">                        @footer <span style="color: #a51c2c">begin</span></div></div><div class="code-line line-covered"><div class="line-number">278</div><div class="line-content">                            <span style="color: #25a268">"</span><span style="color: #25a268">Generated by ExtendedLocalCoverage.jl using HypertextTemplates.jl</span><span style="color: #25a268">"</span></div></div><div class="code-line line-neutral"><div class="line-number">279</div><div class="line-content">                        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">280</div><div class="line-content">                    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">281</div><div class="line-content">                <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">282</div><div class="line-content">            <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">283</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">284</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">285</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">286</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">287</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">288</div><div class="line-content"><span style="color: #25a268">    highlighted_lines(io::IO)</span></div></div><div class="code-line line-neutral"><div class="line-number">289</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">290</div><div class="line-content"><span style="color: #25a268">Extract lines from the given `IO` stream and return them with syntax highlighting using `JuliaSyntaxHighlighting.jl`.</span></div></div><div class="code-line line-neutral"><div class="line-number">291</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">292</div><div class="line-content"><span style="color: #25a268">These lines usually processed with [`ExtendedLocalCoverage.highlight_with_show`](@ref) to get synthax highlighting of julia code in the static HTML report.</span></div></div><div class="code-line line-neutral"><div class="line-number">293</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">294</div><div class="line-content"><span style="color: #a51c2c">function</span> highlighted_lines <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">295</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">296</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">297</div><div class="line-content"><span style="color: #25a268">    plain_lines(io::IO)</span></div></div><div class="code-line line-neutral"><div class="line-number">298</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">299</div><div class="line-content"><span style="color: #25a268">Extract lines from the given `IO` stream and return them as plain text without any syntax highlighting.</span></div></div><div class="code-line line-neutral"><div class="line-number">300</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">301</div><div class="line-content"><span style="color: #25a268">This function simply does `collect(eachline(io))` and is the default fallback used as `lines_function` when `JuliaSyntaxHighlighting.jl` is not loaded.</span></div></div><div class="code-line line-neutral"><div class="line-number">302</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-uncovered"><div class="line-number">303</div><div class="line-content"><span style="color: #a51c2c">function</span> plain_lines(io::IO)</div></div><div class="code-line line-uncovered"><div class="line-number">304</div><div class="line-content">    collect(eachline(io))</div></div><div class="code-line line-neutral"><div class="line-number">305</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">306</div><div class="line-content"><span style="color: #a51c2c">function</span> extract_file_lines(lines_function, filepath::String, pkg_dir::String)</div></div><div class="code-line line-covered"><div class="line-number">307</div><div class="line-content">    fullpath = joinpath(pkg_dir, filepath)</div></div><div class="code-line line-covered"><div class="line-number">308</div><div class="line-content">    isfile(fullpath) || throw(ArgumentError(<span style="color: #25a268">"</span><span style="color: #25a268">Source file not found: </span>$fullpath<span style="color: #25a268">"</span>))</div></div><div class="code-line line-covered"><div class="line-number">309</div><div class="line-content">    <span style="color: #a51c2c">return</span> open(fullpath, <span style="color: #25a268">"</span><span style="color: #25a268">r</span><span style="color: #25a268">"</span>) <span style="color: #a51c2c">do</span> io</div></div><div class="code-line line-covered"><div class="line-number">310</div><div class="line-content">        lines_function(io)</div></div><div class="code-line line-neutral"><div class="line-number">311</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">312</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">313</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">314</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">315</div><div class="line-content"><span style="color: #25a268">    default_html_function(lines_function)</span></div></div><div class="code-line line-neutral"><div class="line-number">316</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">317</div><div class="line-content"><span style="color: #25a268">Extract the default function to be passed as `html_function` argument to `generate_html_report`.</span></div></div><div class="code-line line-neutral"><div class="line-number">318</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">319</div><div class="line-content"><span style="color: #25a268">It takes the `lines_function` as an argument and returns `highlight_with_show` if the `lines_function` is `ExtendedLocalCoverage.highlighted_lines` and simply return the `String` constructor otherwise.</span></div></div><div class="code-line line-neutral"><div class="line-number">320</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-covered"><div class="line-number">321</div><div class="line-content"><span style="color: #a51c2c">function</span> default_html_function(lines_function)</div></div><div class="code-line line-covered"><div class="line-number">322</div><div class="line-content">    <span style="color: #a51c2c">return</span> StyledStringsLoaded[] &amp;&amp; lines_function === highlighted_lines ? highlight_with_show : String</div></div><div class="code-line line-neutral"><div class="line-number">323</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">324</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">325</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-neutral"><div class="line-number">326</div><div class="line-content"><span style="color: #25a268">    default_lines_function()</span></div></div><div class="code-line line-neutral"><div class="line-number">327</div><div class="line-content"><span style="color: #25a268">Extract the default function to be passed as `lines_function` argument to `generate_html_report`.</span></div></div><div class="code-line line-neutral"><div class="line-number">328</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">329</div><div class="line-content"><span style="color: #25a268">If the `JuliaSyntaxHighlighting` package is loaded, this returns the `ExtendedLocalCoverage.highlighted_lines` function, otherwise it returns the `ExtendedLocalCoverage.plain_lines` function.</span></div></div><div class="code-line line-neutral"><div class="line-number">330</div><div class="line-content"><span style="color: #25a268">"""</span></div></div><div class="code-line line-covered"><div class="line-number">331</div><div class="line-content"><span style="color: #a51c2c">function</span> default_lines_function()</div></div><div class="code-line line-covered"><div class="line-number">332</div><div class="line-content">    <span style="color: #a51c2c">return</span> JuliaSyntaxHighlightingLoaded[] ? highlighted_lines : plain_lines</div></div><div class="code-line line-neutral"><div class="line-number">333</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div></div><div class="missing-lines"><strong>Uncovered Lines: </strong>303‚Äì304</div></div><div class="file-card" id="file-4"><div class="file-header"><div class="file-name">ext/JuliaSyntaxHighlightingExt.jl</div><div class="file-stats"><span class="stat"><span class="coverage-badge coverage-excellent">100.0%</span></span><span class="stat"><span>üìä 5/5 lines</span></span><span class="stat"><span>‚ùå 0 missed</span></span></div></div><div class="source-code"><div class="code-line line-neutral"><div class="line-number">1</div><div class="line-content"><span style="color: #a51c2c">module</span> JuliaSyntaxHighlightingExt</div></div><div class="code-line line-neutral"><div class="line-number">2</div><div class="line-content">    <span style="color: #a51c2c">using</span> JuliaSyntaxHighlighting: JuliaSyntaxHighlighting, highlight</div></div><div class="code-line line-neutral"><div class="line-number">3</div><div class="line-content">    <span style="color: #a51c2c">using</span> ExtendedLocalCoverage: ExtendedLocalCoverage</div></div><div class="code-line line-neutral"><div class="line-number">4</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">5</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">6</div><div class="line-content">    <span style="color: #a51c2c">function</span> ExtendedLocalCoverage.highlighted_lines(io::IO)</div></div><div class="code-line line-covered"><div class="line-number">7</div><div class="line-content">        highlighted = highlight(io)</div></div><div class="code-line line-covered"><div class="line-number">8</div><div class="line-content">        map(eachsplit<span style="color: #25a268">(</span>highlighted, '<span style="color: #25a268">\n</span><span style="color: #25a268">'</span>)) <span style="color: #a51c2c">do</span> line</div></div><div class="code-line line-covered"><div class="line-number">9</div><div class="line-content">            endswith<span style="color: #25a268">(</span>line, '<span style="color: #25a268">\r</span><span style="color: #25a268">'</span>) ? line[1:end-1] : line <span style="color: #76757a"># Deal with Windows line endings</span></div></div><div class="code-line line-neutral"><div class="line-number">10</div><div class="line-content">        <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">11</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">12</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">13</div><div class="line-content">    <span style="color: #a51c2c">function</span> __init__()</div></div><div class="code-line line-neutral"><div class="line-number">14</div><div class="line-content">        <span style="color: #76757a"># We set this flag to true to indicate that tye JuliaSyntaxHighlighting extension has been loaded</span></div></div><div class="code-line line-covered"><div class="line-number">15</div><div class="line-content">        ExtendedLocalCoverage.JuliaSyntaxHighlightingLoaded[] = true</div></div><div class="code-line line-neutral"><div class="line-number">16</div><div class="line-content">    <span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">17</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div></div></div><div class="file-card" id="file-5"><div class="file-header"><div class="file-name">ext/StyledStringsExt.jl</div><div class="file-stats"><span class="stat"><span class="coverage-badge coverage-excellent">100.0%</span></span><span class="stat"><span>üìä 6/6 lines</span></span><span class="stat"><span>‚ùå 0 missed</span></span></div></div><div class="source-code"><div class="code-line line-neutral"><div class="line-number">1</div><div class="line-content"><span style="color: #a51c2c">module</span> StyledStringsExt</div></div><div class="code-line line-neutral"><div class="line-number">2</div><div class="line-content">    <span style="color: #a51c2c">using</span> StyledStrings: StyledStrings, AnnotatedString</div></div><div class="code-line line-neutral"><div class="line-number">3</div><div class="line-content">    <span style="color: #a51c2c">using</span> ExtendedLocalCoverage: ExtendedLocalCoverage, StyledStringsLoaded, SafeString</div></div><div class="code-line line-neutral"><div class="line-number">4</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">5</div><div class="line-content"><span style="color: #a51c2c">const</span> VALID_TYPE = Union{AnnotatedString, SubString{&lt;:AnnotatedString}}</div></div><div class="code-line line-neutral"><div class="line-number">6</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">7</div><div class="line-content"><span style="color: #a51c2c">function</span> ExtendedLocalCoverage.highlight_with_show(line::VALID_TYPE)</div></div><div class="code-line line-covered"><div class="line-number">8</div><div class="line-content">    io = IOBuffer()</div></div><div class="code-line line-covered"><div class="line-number">9</div><div class="line-content">    show(io, MIME<span style="color: #25a268">"</span><span style="color: #25a268">text/html</span><span style="color: #25a268">"</span>(), line)</div></div><div class="code-line line-covered"><div class="line-number">10</div><div class="line-content">    <span style="color: #a51c2c">return</span> String(take!(io)) |&gt; SafeString</div></div><div class="code-line line-neutral"><div class="line-number">11</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">12</div><div class="line-content"></div></div><div class="code-line line-covered"><div class="line-number">13</div><div class="line-content"><span style="color: #a51c2c">function</span> __init__()</div></div><div class="code-line line-neutral"><div class="line-number">14</div><div class="line-content">    <span style="color: #76757a"># We set this flag to true to indicate that the StyledStrings extension has been loaded</span></div></div><div class="code-line line-covered"><div class="line-number">15</div><div class="line-content">    StyledStringsLoaded[] = true</div></div><div class="code-line line-neutral"><div class="line-number">16</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div><div class="code-line line-neutral"><div class="line-number">17</div><div class="line-content"></div></div><div class="code-line line-neutral"><div class="line-number">18</div><div class="line-content"><span style="color: #a51c2c">end</span></div></div></div></div></div><footer>Generated by ExtendedLocalCoverage.jl using HypertextTemplates.jl</footer></div></body></html>